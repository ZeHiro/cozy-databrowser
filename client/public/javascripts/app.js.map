{"version":3,"sources":["app/application.js","app/initialize.js","app/models/menu.js","app/views/main.js","app/views/menu.js"],"names":[],"mappings":"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","file":"public/javascripts/app.js","sourcesContent":["import MenuView from \"views/menu\";\nimport MainView from \"views/main\";\n\nvar Router = Backbone.Router.extend({\n    routes: {\n        \"doctype/:doctype\": \"onDoctype\"\n    },\n    onDoctype(doctype){\n        this.app.views.main.setDoctype(doctype);\n    }\n\n});\n\nvar app = {\n    initialize() {\n        this.views = {\n            menu: new MenuView(),\n            main: new MainView()\n        };\n        this.views.menu.$el.appendTo(\"#container\");\n        this.views.main.$el.appendTo(\"#container\");\n        this.router = new Router({\n            app: this\n        });\n        this.router.app = this;\n        Backbone.history.start();\n    }\n}\n\nvar router = new Router();\n\nexport default app\n\n","import app from \"application\";\n\nwindow.app = app;\n\n$(() => app.initialize());\n","export default Backbone.Collection.extend({\n    model: Backbone.Model,\n    url: \"/docTypes\"\n});\n","function attrToString(attr) {\n    if (!_(attr).isObject()) return attr;\n    else {\n        var result = '<ul>';\n        for (var i in attr) {\n            result+= `<li>${attrToString(attr[i])}</li>`;\n        }\n        result+= '</ul>';\n        return result;\n    }\n}\n\n\nexport default Backbone.View.extend({\n    attributes: {\n        id: \"main\"\n    },\n    collection: new Backbone.Collection(),\n    emptyTemplate: '<p>Nothing to display at the moment!</p>',\n    initialize() {\n        this.render();\n        this.listenTo(this.collection, \"reset\", this.render);\n    },\n    render() {\n        var html = \"\";\n        if (this.collection.length === 0) {\n            html = this.emptyTemplate;\n        } else {\n            html = '<table><thead><tr>';\n            var model = this.collection.at(0).toJSON();\n            for (var i in model) {\n                html+= `<th>${i}</th>`;\n            }\n            html+= '</tr></thead><tbody>';\n            this.collection.forEach(model => {\n                html+= '<tr>';\n                var json = model.toJSON();\n                for (var i in json) {\n                    html+= `<td>${attrToString(json[i])}</td>`;\n                }\n                html+= '</tr>';\n            });\n            html+= '</tbody></table>';\n        }\n        this.$el.empty().html(html);\n        return this;\n    },\n    setDoctype(doctype){\n        this.doctype = doctype;\n        this.collection.fetch({\n            reset: true,\n            url: \"search?page=1&nbperpage=100&range=all&doctypes[]=\" + doctype\n        });\n    }\n});\n","import Collection from \"models/menu\";\n\nexport default Backbone.View.extend({\n    attributes: {\n        id: \"menu\"\n    },\n    collection: new Collection(),\n    initialize() {\n        this.collection.fetch().done(this.render.bind(this));\n    },\n    itemTemplate: _.template('<li><a href=\"#doctype/<%= doctype %>\"><%= doctype %> (<%= sum %>)</a></li>'),\n    render() {\n        var html = \"<ul>\";\n        this.collection.forEach((model) => {\n            html+= this.itemTemplate(model.toJSON());\n        }, this);\n        html+= \"</ul>\";\n        this.$el.empty().html(html);\n        return this;\n    }\n});\n"]}