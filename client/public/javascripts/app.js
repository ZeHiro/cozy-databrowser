!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},o={},r={}.hasOwnProperty,n={},i=function(e,t){var o=0;t&&(t.indexOf(!1)&&(o="components/".length),t.indexOf("/",o)>0&&(t=t.substring(o,t.indexOf("/",o))));var r=n[e+"/index.js"]||n[t+"/deps/"+e+"/index.js"];return r?"components/"+r.substring(0,r.length-".js".length):e},s=function(){var e=/^\.\.?(\/|$)/;return function(t,o){var r,n,i=[];r=(e.test(o)?t+"/"+o:o).split("/");for(var s=0,l=r.length;l>s;s++)n=r[s],".."===n?i.pop():"."!==n&&""!==n&&i.push(n);return i.join("/")}}(),l=function(e){return e.split("/").slice(0,-1).join("/")},a=function(t){return function(o){var r=s(l(t),o);return e.require(r,t)}},c=function(e,t){var r={id:e,exports:{}};return o[e]=r,t(r.exports,a(e),r),r.exports},u=function(e,n){var l=s(e,".");if(null==n&&(n="/"),l=i(e,n),r.call(o,l))return o[l].exports;if(r.call(t,l))return c(l,t[l]);var a=s(l,"./index");if(r.call(o,a))return o[a].exports;if(r.call(t,a))return c(a,t[a]);throw new Error('Cannot find module "'+e+'" from "'+n+'"')};u.alias=function(e,t){n[t]=e},u.register=u.define=function(e,o){if("object"==typeof e)for(var n in e)r.call(e,n)&&(t[n]=e[n]);else t[e]=o},u.list=function(){var e=[];for(var o in t)r.call(t,o)&&e.push(o);return e},u.brunch=!0,e.require=u}}(),require.register("application",function(e,t,o){o.exports={initialize:function(){var e,o,r;e=t("router"),this.router=new e,this.locale=window.locale,delete window.locale,this.polyglot=new Polyglot;try{r=t("locales/"+this.locale)}catch(n){o=n,r=t("locales/en")}return this.polyglot.extend(r),window.t=this.polyglot.t.bind(this.polyglot),$("#menu-toggler").on("click",function(e){return e.preventDefault(),$("#sidebar").toggleClass("display"),$(this).toggleClass("display")}),Backbone.history.start()}}}),require.register("collections/doctype_collection",function(e,t,o){var r,n=function(e,t){function o(){this.constructor=e}for(var r in t)i.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},i={}.hasOwnProperty;o.exports=r=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.model=t("../models/doctype_model"),o.prototype.url="doctypes",o}(Backbone.Collection)}),require.register("collections/result_collection",function(e,t,o){var r,n=function(e,t){function o(){this.constructor=e}for(var r in t)i.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},i={}.hasOwnProperty;o.exports=r=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.model=t("../models/result_model"),o.prototype.page=1,o.prototype.nbPerPage=10,o.prototype.url=function(){var e,t,o;return o="",e="",this.nbPerPage>0&&(e="nbperpage="+this.nbPerPage),t=this.page>0?"page="+this.page:"",""!==t&&""!==e&&(o="?"+t+"&"+e),"search"+o},o.prototype.fields=function(){var e;return e={},this.each(function(t){var o,r,n,i,s,l,a;for(s=Object.keys(t.toJSON()),a=[],n=0,i=s.length;i>n;n++)r=s[n],"count"!==r&&"descField"!==r&&"displayName"!==r&&"idField"!==r&&(o=null!=(l=t.get("descField"))?l[r]:void 0,a.push(null!=e[r]?e[r]:e[r]={cdbFieldDescription:(null!=o?o.description:void 0)||"",cdbFieldName:(null!=o?o.displayName:void 0)||r}));return a}),e},o}(Backbone.Collection)}),require.register("helpers/oLocalStorageHelper",function(e,t,o){o.exports={keys:{isMetaInfoVisible:"ismetainfovisible",isListPresentation:"istablepresentation",separator:"."},getBoolean:function(e){var t;return t=localStorage.getItem(e),t&&JSON.parse(t)?!0:!1},setBoolean:function(e,t){return"boolean"==typeof t?localStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e("false"))}}}),require.register("initialize",function(e,t,o){var r;r=t("application"),$(function(){return t("lib/app_helpers"),r.initialize()})}),require.register("lib/app_helpers",function(e,t,o){$.fn.spin=function(e,t){var o;return o={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:1,width:2,radius:5},large:{lines:10,length:8,width:4,radius:8}},Spinner?this.each(function(){var r,n;return r=$(this),n=r.data("spinner"),null!=n?(n.stop(),r.data("spinner",null)):e!==!1?("string"==typeof e&&(e=e in o?o[e]:{},t&&(e.color=t)),n=new Spinner($.extend({color:r.css("color")},e)),n.spin(this),r.data("spinner",n)):void 0}):(console.log("Spinner class not available."),null)}}),require.register("lib/base_view",function(e,t,o){var r,n=function(e,t){function o(){this.constructor=e}for(var r in t)i.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},i={}.hasOwnProperty;o.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.template=function(){},t.prototype.initialize=function(){},t.prototype.getRenderData=function(){var e;return{model:null!=(e=this.model)?e.toJSON():void 0}},t.prototype.render=function(){return this.beforeRender(),this.$el.html(this.template(this.getRenderData())),this.afterRender(),this},t.prototype.beforeRender=function(){},t.prototype.afterRender=function(){},t.prototype.destroy=function(){return this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)},t}(Backbone.View)}),require.register("lib/view",function(e,t,o){var r,n=function(e,t){function o(){this.constructor=e}for(var r in t)i.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},i={}.hasOwnProperty;o.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.template=function(){},t.prototype.initialize=function(){},t.prototype.render=function(e){var t;return this.beforeRender(),t=this.template().call(null,e),this.$el.html(t),this.afterRender(),this},t.prototype.beforeRender=function(){},t.prototype.afterRender=function(){},t.prototype.destroy=function(){return this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)},t}(Backbone.View)}),require.register("lib/view_collection",function(e,t,o){var r,n,i=function(e,t){return function(){return e.apply(t,arguments)}},s=function(e,t){function o(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=t("lib/base_view"),o.exports=n=function(e){function t(){return this.removeItem=i(this.removeItem,this),this.addItem=i(this.addItem,this),t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.itemview=null,t.prototype.views={},t.prototype.template=function(){return""},t.prototype.itemViewOptions=function(){},t.prototype.collectionEl=null,t.prototype.onChange=function(){return this.$el.toggleClass("empty",0===_.size(this.views))},t.prototype.appendView=function(e){return this.$collectionEl.append(e.el)},t.prototype.initialize=function(){var e;return this.count=0,this.deleted=0,t.__super__.initialize.apply(this,arguments),this.views={},this.listenTo(this.collection,"reset",this.onReset),this.listenTo(this.collection,"add",this.addItem),this.listenTo(this.collection,"remove",this.removeItem),null==this.collectionEl?e=el:void 0},t.prototype.render=function(){var e,o,r;o=this.views;for(e in o)r=o[e],r.$el.detach();return t.__super__.render.apply(this,arguments)},t.prototype.afterRender=function(){var e,t,o;this.$collectionEl=$(this.collectionEl),this.$collectionEl.empty(),t=this.views;for(e in t)o=t[e],this.appendView(o);return this.onReset(this.collection),this.onChange(this.views)},t.prototype.remove=function(){return this.onReset([]),t.__super__.remove.apply(this,arguments)},t.prototype.onReset=function(e){var t,o,r;o=this.views;for(t in o)r=o[t],r.remove();return e.forEach(this.addItem)},t.prototype.addItem=function(e){var t,o;return this.count++,e.set("count",this.count),t=_.extend({},{model:e},this.itemViewOptions(e)),o=new this.itemview(t),this.views[e.cid]=o.render(),this.appendView(o),this.onChange(this.views)},t.prototype.removeItem=function(e){return this.deleted++,this.views[e.cid].remove(),delete this.views[e.cid],this.onChange(this.views)},t}(r)}),require.register("locales/en",function(e,t,o){o.exports={all:"All",applications:"Applications","currently exploring":"Currently exploring","confirmation required":"Confirmation required","are you absolutely sure":"Are you ABSOLUTELY sure ?\nIt could lead to IRREVERSIBLE DAMAGES to your cozy environment.","delete permanently":"Delete permanently",cancel:"Cancel","load more results":"load more results","delete all":"Delete all","search-placeholder":"Search ...",about:"About","applications using it":"Applications using it","fields information":"Fields information",sources:"sources","welcome title":"Welcome to your data explorer","welcome message part1":"This application allows you to find any data in your cozy environement.","welcome message part2":"Please, explore the menu and select a type of document that you want to retrieve.","button toggle visibility":"Show / Hide columns"}}),require.register("locales/fr",function(e,t,o){o.exports={all:"Tous",applications:"Applications","currently exploring":"Vue actuelle","confirmation required":"Confirmation requise","are you absolutely sure":"Etes vous VRAIMENT sûr ?\nCela peut causer des DOMMAGES IRREVERSIBLES à votre Cozy.","delete permanently":"Supprimer définitivement",cancel:"Annuler","load more results":"Charger plus de résultats","delete all":"Tout supprimer","search-placeholder":"Recherche ...",about:"A propos de","applications using it":"Applications l'utilisant","fields information":"Information sur les champs",sources:"sources","welcome title":"Bienvenue sur votre explorateur de données","welcome message part1":"Cette application vous permet de visualiser toutes les données présentes dans votre Cozy.","welcome message part2":"Déroulez le menu et sélectionnez un type de données pour consulter les documents en relation.","button toggle visibility":"Montrer / Cacher des colonnes"}}),require.register("models/delete_all_model",function(e,t,o){var r,n=function(e,t){function o(){this.constructor=e}for(var r in t)i.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},i={}.hasOwnProperty;o.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.urlRoot="doctype_delete_all",t}(Backbone.Model)}),require.register("models/doctype_model",function(e,t,o){var r,n=function(e,t){function o(){this.constructor=e}for(var r in t)i.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},i={}.hasOwnProperty;o.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.rootUrl="doctypes",t}(Backbone.Model)}),require.register("models/result_model",function(e,t,o){var r,n=function(e,t){function o(){this.constructor=e}for(var r in t)i.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},i={}.hasOwnProperty;o.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.urlRoot="search",t}(Backbone.Model)}),require.register("router",function(e,t,o){var r,n,i,s=function(e,t){function o(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=t("views/doctype_nav_view"),i=t("views/search_view"),o.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.routes={"":"search",search:"search","search/all/:doctype":"search"},t.prototype.initialize=function(){return new r},t.prototype.search=function(e){var t,o;return t={},null!=e&&(t.range="all",t.doctypes=[e],Backbone.trigger("change:section",Backbone.history.fragment)),o=new i(t)},t}(Backbone.Router)}),require.register("views/doctype_nav_view",function(e,t,o){var r,n,i=function(e,t){function o(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=t("../collections/doctype_collection"),o.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.collection=new r,t.prototype.el="#doctype-nav-collection-view",t.prototype.initialize=function(){return this.collection.fetch({data:$.param({menu:!0})}),this.listenTo(this.collection,"sync",this.onSync),this.listenTo(Backbone,"change:section",this.onChangeSection),this},t.prototype.onSync=function(){var e;return e="",this.collection.each(function(t){var o;return o=t.toJSON(),e+='<li>\n    <a href="#search/all/'+o.doctype+'">\n        <span class="menu-text firstLetterUp">'+o.doctype+" ("+o.sum+")</span>\n    </a>\n</li>\n"}),this.$el.append(e),this.onChangeSection(this.section)},t.prototype.render=function(){},t.prototype.onChangeSection=function(e){return this.$("li").each(function(){return $(this).removeClass("active")}),this.$("a[href='#"+e+"']").closest("li").addClass("active"),this.section=e},t}(Backbone.View)}),require.register("views/result_collection_view",function(e,o,r){var n,i,s,l,a=function(e,t){function o(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},c={}.hasOwnProperty;l=o("../lib/view_collection"),n=o("../collections/result_collection"),s=o("./result_table_view"),r.exports=i=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.itemview=s,o.prototype.collectionEl="#result-view-as-table",o.prototype.isLoading=!1,o.prototype.noMoreItems=!1,o.prototype.firstRender=!0,o.prototype.initialize=function(e){return this.options=e,this.collection=new n,this.itemview=s,this.collectionEl="#result-view-as-table",o.__super__.initialize.apply(this,arguments),null!=this.options.doctypes?($("#results-list").undelegate("th .icon-eye-close","click"),$("#results-list").undelegate("button.show-col","click"),this.isLoading=!0,this.collection.fetch({reset:!0,data:$.param(this.options),success:function(e){return function(t,o){return e.isLoading=!1,$(".loading-image").remove(),null!=e.options.range&&null!=e.options.doctypes?o.length===e.collection.nbPerPage?(e.loopFirstScroll(),$(".load-more-result").show()):(e.noMoreItems=!0,e.buildTable(e.firstRender),e.collection.forEach(e.addItem),$(".load-more-result").hide()):void 0}}(this),error:function(e){return function(){return e.isLoading=!1,$(".loading-image").remove(),e.noMoreItems=!0,e.displayLoadingError()}}(this)})):void 0},o.prototype.onReset=function(){return this.oldFields=this.collection.fields(),this.buildTable(this.firstRender),o.__super__.onReset.apply(this,arguments)},o.prototype.render=function(){return $(".introduction").hide(),this.firstRender&&(this.buildTable(!0),this.firstRender=!1),this.isLoading&&$("#all-result").append('<div class="loading-image">\n    <img src="images/ajax-loader.gif" />\n</div>'),o.__super__.render.apply(this,arguments)},o.prototype.appendView=function(e){return $("#result-view-as-table").dataTable().api().rows.add(e.$el).draw()},o.prototype.itemViewOptions=function(){return{fields:this.collection.fields()}},o.prototype.search=function(e){return this.options.query=e,this.collection.fetch({data:$.param(this.options)})},o.prototype.loadNextPage=function(e,t){return this.options.deleted=this.deleted,this.noMoreItems?void 0:(this.isLoading=!0,this.collection.page++,e||($(".load-more-result i, .load-more-result span").hide(),$(".load-more-result").spin("tiny")),this.collection.fetch({data:$.param(this.options),remove:!1,success:function(o){return function(r,n){var i;return null==n.length?(o.noMoreItems=!0,o.buildTable(o.firstRender)):(e||($(".load-more-result .spinner").hide(),$(".load-more-result i").show(),$(".load-more-result span").show()),i=n.length<o.collection.nbPerPage,o.noMoreItems=i,o.noMoreItems&&$(".load-more-result").hide(),o.isLoading=!1,Object.keys(o.oldFields).length!==Object.keys(o.collection.fields()).length&&(o.oldFields=o.collection.fields(),o.buildTable(o.firstRender),o.collection.forEach(o.addItem)),o.noMoreItems&&(o.buildTable(o.firstRender),o.collection.forEach(o.addItem)),null!=t?t():void 0)}}(this),error:function(){return this.isLoading=!1,this.noMoreItems=!0,this.displayLoadingError()}}))},o.prototype.loopFirstScroll=function(){var e;return this.isLoading||this.noMoreItems||!(e=$(document).height()===$(window).height())?void 0:this.loadNextPage(!0,function(e){return function(){return e.loopFirstScroll()}}(this))},o.prototype.displayLoadingError=function(){var e;return $(".load-more-result").css({color:"#AF4434"}),$(".load-more-result i").hide(),e="An error occurs during the loading process",$(".load-more-result span").text(e),$(".load-more-result").show()},o.prototype.makeTHead=function(){var e,t,o,r,n,i;$("#result-view-as-table").find("thead").remove(),r="<thead><tr>",n=this.itemViewOptions().fields;for(o in n)t=n[o],e=t.cdbFieldName,i=t.cdbFieldDescription,r+='<th class="cozy_'+o+'"\n    title="'+i+'">\n    '+e+"\n</th>";return r+='<th class="action">Action</th>',r+="</tr></thead>",$("#result-view-as-table").prepend(r)},o.prototype.buildTable=function(e){var o,r;return e||(r=$("#result-view-as-table").dataTable(),r.fnDestroy(),$("#result-view-as-table tr").remove()),this.makeTHead(),o="DataTables_"+window.location.hash,$("#result-view-as-table").dataTable({retrieve:!e,paging:!1,columnDefs:[{bSortable:this.noMoreItems,aTargets:["_all"]},{bSortable:!0,aTargets:["cozy_docType","action"]},{bVisible:!1,aTargets:["cozy__id","cozy_docType","cozy_password"]}],oColVis:{iOverlayFade:200,buttonText:t("button toggle visibility")},dom:"CRt",bStateSave:!0,fnStateSave:function(e,t){var r;return r=JSON.stringify(t),localStorage.setItem(o,r)},fnStateLoad:function(e){var t;return t=localStorage.getItem(o),JSON.parse(t)}})},o}(l)}),require.register("views/result_table_view",function(e,o,r){var n,i,s=function(e,t){return function(){return e.apply(t,arguments)}},l=function(e,t){function o(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},a={}.hasOwnProperty,c=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1};i=o("./../lib/view"),r.exports=n=function(e){function r(){return this.render=s(this.render,this),r.__super__.constructor.apply(this,arguments)}return l(r,e),r.prototype.tagName="tr",r.prototype.templateModal=o("./templates/modal_confirm"),r.prototype.events={"click .accordion-toggle":"blurIt","mouseenter .label":"showFieldDescription","mouseleave .label":"showFieldDescription","click .remove-result":"confirmRemoveResult","mouseover .remove-result":"convertButtonToDanger","mouseout .remove-result":"convertButtonToClassic"},r.prototype.initialize=function(e){return this.fields=e.fields},r.prototype.convertButtonToDanger=function(e){var t;return t=$(e.currentTarget),t.addClass("btn-danger")},r.prototype.convertButtonToClassic=function(e){var t;return t=$(e.currentTarget),t.removeClass("btn-danger")},r.prototype.render=function(){var e;return e=this.manageResultsForView(),r.__super__.render.call(this,{fields:this.fields,results:e})},r.prototype.manageResultsForView=function(){var e,t,o;return e=this.model.attributes,t=this.model.get("count"),o={},null!=e.no_result?($("#all-result .accordion").empty(),o.no_result=!0,o.no_result_msg=e.no_result,o):0===t?(o.no_result=!0,o.no_result_msg="No results.",o):(o.no_result=!1,o.count=t,o.heading={doctype:e.displayName||e.docType,field:null!=e.idField?e.idField:"id",data:null!=e.idField?e[e.idField]:e._id},this.results=o,this.results.fields=this.prepareResultFields(e),this.results)},r.prototype.prepareResultFields=function(e){var t,o,r,n,i,s,l,a,u,p,d,h,f,y,m,v,g,b,_;u=0,l=[],v=["idField","count","descField","displayName"],g=["string","number","boolean"];for(s in e)if(i=e[s],c.call(v,s)<0)if(u=s,l[u]={cdbFieldDescription:"",cdbFieldName:s,cdbFieldTitle:"",cdbFieldData:"",cdbLabelClass:"label-secondary"},null!=e.descField&&null!=e.descField[s]&&(null!=e.descField[s].description&&(r=e.descField[s].description,l[u].cdbFieldDescription=r),o=e.descField[s],a=null!=o.displayName,a&&""!==o.displayName&&(n=o.displayName,l[u].cdbFieldName=n,i===this.results.heading.field&&(this.results.heading.field=n))),b=typeof i,d=-1!==$.inArray(b,g))t="cdbFieldData","docType"===s?l[u][t]=e.displayName||i:"_id"===s?(h="..."+i.substr(i.length-5),l[u][t]=h,l[u].cdbFieldTitle=i):l[u][t]=i;else if(null!=i&&"object"===b){l[u].cdbFieldData='<ul class="sober-list">';for(m in i)y=i[m],f="",_=typeof y,p=-1!==$.inArray(_,g),p?(f="<li>"+m+" : ",f+="<i>"+y+"</i></li>",l[u].cdbFieldData+=f):null!=y&&"object"==typeof y?(f="<li>"+m+" : ",f+="<i>"+JSON.stringify(y)+"</i></li>",l[u].cdbFieldData+=f):(f="<li><i>empty</i></li>",l[u].cdbFieldData+=f,l[u].cdbLabelClass="label-danger");l[u].cdbFieldData+="</ul>"}else l[u].cdbFieldData="<i>empty</i>",l[u].cdbLabelClass="label-danger";return l},r.prototype.template=function(){return o("./templates/result_table")},r.prototype.blurIt=function(e){return $(e.currentTarget).blur()},r.prototype.showFieldDescription=function(e){var t,o,r,n,i,s,l,a,c,u;return n=$(e.currentTarget),""!==n.attr("data-title")?"mouseenter"===e.type?(s=n.offset().left,l=n.offset().top,t=$("#basic-accordion.accordion").offset().left,o=$("#basic-accordion.accordion").offset().top,i=s-t-5,c=l-o-7,u=n.width(),$(".info-box .field-title").css({"padding-left":u+18}),a=n.attr("data-title"),$(".info-box .field-description").empty().html(a),r={"z-index":"5",left:i,top:c},$(".info-box").css(r),$(".accordion .label").css({"z-index":"inherit"}),n.css({"z-index":"10"}),$(".info-box").stop().fadeTo(200,1)):$(".info-box").stop().fadeTo(200,0):void 0},r.prototype.confirmRemoveResult=function(e){var o,r;return r=this,e.preventDefault(),o={title:t("confirmation required"),body:t("are you absolutely sure"),confirm:t("delete permanently")},$("body").prepend(this.templateModal(o)),$("#confirmation-dialog").modal(),$("#confirmation-dialog").modal("show"),$("#confirmation-dialog-confirm").unbind("click"),$("#confirmation-dialog-confirm").bind("click",function(){return r.removeResult()})},r.prototype.removeResult=function(){return this.model.set("id",this.model.get("_id")),this.model.destroy({data:"id="+this.model.get("id"),success:function(e){return function(){return e.render}}(this)})},r}(i)}),require.register("views/search_view",function(e,o,r){var n,i,s,l,a=function(e,t){return function(){return e.apply(t,arguments)}},c=function(e,t){function o(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},u={}.hasOwnProperty;n=o("../lib/base_view"),s=o("../views/result_collection_view"),i=o("../models/delete_all_model"),r.exports=l=function(e){function r(){return this.initialize=a(this.initialize,this),r.__super__.constructor.apply(this,arguments)}return c(r,e),r.prototype.el="#results-list",r.prototype.template=o("./templates/search"),r.prototype.templateModal=o("./templates/modal_confirm"),r.prototype.hasDoctype=!1,r.prototype.events={"click #btn-scroll-up":"hideThis","mouseover #delete-all":"switchStyleOfDeleteButton","mouseout #delete-all":"switchStyleOfDeleteButton","click #delete-all":"confirmDeleteAll"},r.prototype.switchStyleOfDeleteButton=function(e){var o;return o=$(e.currentTarget),o.hasClass("btn-danger")?(o.removeClass("btn-danger"),o.children("span").empty()):(o.addClass("btn-danger"),o.children("span").text(t("delete all")+" "))},r.prototype.confirmDeleteAll=function(e){var o;return e.preventDefault(),o={title:t("confirmation required"),body:t("are you absolutely sure"),confirm:t("delete permanently")},$("body").prepend(this.templateModal(o)),$("#confirmation-dialog").modal(),$("#confirmation-dialog").modal("show"),$("#confirmation-dialog-confirm").unbind("click"),$("#confirmation-dialog-confirm").bind("click",function(e){return function(){return e.deleteAll()}}(this))},r.prototype.deleteAll=function(){var e;return null!=this.currentDoctype&&""!==this.currentDoctype?(e=new i,e.fetch({type:"DELETE",url:e.urlRoot+"?"+$.param({doctype:this.currentDoctype}),success:function(e,t){return app.router.navigate("search",{replace:!0,trigger:!0}),location.reload()}})):void 0},r.prototype.initialize=function(e){return this.options=e,this.hasDoctype=this.options.doctypes&&this.options.doctypes.length>0,this.bindSearch(),this.hasDoctype&&(this.currentDoctype=this.options.doctypes[0],this.resultCollectionView=new s(this.options),null!=this.options.range&&$(window).bind("scroll",function(e){return function(t,o){var r,n,i;return r=$(document).height(),n=e.resultCollectionView.noMoreItems,e.resultCollectionView.isLoading||n||(i=$(window).scrollTop()+$(window).height(),i===r&&e.loadMore(o)),$(window).scrollTop()>0?$("#btn-scroll-up").show():$("#btn-scroll-up").hide()}}(this))),this.render()},r.prototype.afterRender=function(){return this.hasDoctype?(this.resultCollectionView.render(),$(window).bind("resize",function(e){return function(){return e.resultCollectionView.loopFirstScroll()}}(this)),this.bindSearch()):void 0},r.prototype.hideThis=function(e){var t;return t=$(e.currentTarget),t.hide()},r.prototype.loadMore=function(e){return this.resultCollectionView.loadNextPage(e)},r.prototype.bindSearch=function(){var e,o;return e=$("#launch-search"),o=$("#search-field"),e.unbind("click"),o.unbind("keypress"),e.click(function(e){return function(){return e.resultCollectionView.search(o.val())}}(this)),o.attr("placeholder",t("search-placeholder")),o.keypress(function(t){return 13===t.which?(t.preventDefault(),e.click()):void 0})},r}(n)}),require.register("views/templates/modal_confirm",function(e,o,r){var n=function(e){var o,r=[],n=e||{},i=n.title,s=n.body,l=n.confirm;return r.push('<div id="confirmation-dialog" class="modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" data-dismiss="modal" aria-hidden="true" class="close">x</button><h4 class="modal-title">'+jade.escape(null==(o=i)?"":o)+'</h4></div><div class="modal-body"><p class="modal-confirm-text">'+jade.escape(null==(o=s)?"":o)+'</p></div><div class="modal-footer"><span data-dismiss="modal" class="btn btn-link">'+jade.escape(null==(o=t("cancel"))?"":o)+'</span><span id="confirmation-dialog-confirm" data-dismiss="modal" class="btn btn-danger">'+jade.escape(null==(o=l)?"":o)+"</span></div></div></div></div>"),r.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("views/templates/result_table",function(e,t,o){var r=function(e){var t,o=[],r=e||{},n=r.results,i=r.fields,s=r.undefined;return n.no_result?o.push("<em>"+jade.escape(null==(t=n.no_result_msg)?"":t)+"</em>"):(function(){var e=Object.keys(i);if("number"==typeof e.length)for(var r=0,l=e.length;l>r;r++){var a=e[r];n.fields[a]==s?o.push("<td>NA</td>"):""!==n.fields[a].cdbFieldTitle?o.push("<td"+jade.attr("title",n.fields[a].cdbFieldTitle,!0,!1)+">"+(null==(t=n.fields[a].cdbFieldData)?"":t)+"</td>"):o.push("<td>"+(null==(t=n.fields[a].cdbFieldData)?"":t)+"</td>")}else{var l=0;for(var r in e){l++;var a=e[r];n.fields[a]==s?o.push("<td>NA</td>"):""!==n.fields[a].cdbFieldTitle?o.push("<td"+jade.attr("title",n.fields[a].cdbFieldTitle,!0,!1)+">"+(null==(t=n.fields[a].cdbFieldData)?"":t)+"</td>"):o.push("<td>"+(null==(t=n.fields[a].cdbFieldData)?"":t)+"</td>")}}}.call(this),o.push('<td class="action"><button class="btn btn-xs remove-result"><i class="icon-trash bigger-120"></i></button></td>')),o.join("")};"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof o&&o&&o.exports&&(o.exports=r)}),require.register("views/templates/search",function(e,o,r){var n=function(e){var o,r=[];return r.push('<div class="introduction"><div class="page-header"><h1>'+jade.escape(null==(o=t("welcome title"))?"":o)+"</h1></div><p>"+jade.escape(null==(o=t("welcome message part1"))?"":o)+"</p><p>"+jade.escape(null==(o=t("welcome message part2"))?"":o)+'</p></div><div id="all-result"><div class="visible-md visible-lg hidden-sm hidden-xs btn-group result-buttons"><button id="delete-all" class="btn btn-xs"><span></span><i class="icon-trash bigger-120"></i></button></div><div id="basic-table" class="table-responsive"><table id="result-view-as-table" class="table table-striped table-bordered table-hover"><tbody></tbody></table></div><div class="load-more-result"><span>'+jade.escape(null==(o=t("load more results"))?"":o)+'&nbsp;</span><br/><i class="icon-circle-arrow-down"></i></div></div>'),r.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)});